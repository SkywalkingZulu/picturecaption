!function(){"use strict";var a,b=!1,c=[],d={},e=document.getElementsByTagName("figure"),f=function(a){return a.replace(window.location.origin+window.location.pathname,"")},g=function(a){for(var b=0;b<c.length;b++)if(c[b].id===a)return c[b];return!1};b&&console.log(e);for(var h=0;h<e.length;h++)for(var i=0;i<e[h].children.length;i++){var j,k,l=e[h].children[i],m=l.tagName.toLowerCase();if("picture"===m)for(var n=0;n<l.children.length;n++){var o=l.children[n],p=o.tagName.toLowerCase();if("source"===p)for(var q=o.srcset.split(","),r=0;r<q.length;r++){var s=q[r].trim().split(" "),t="";k=f(s[0].trim()),o.hasAttribute("data-alt")&&(t=o.getAttribute("data-alt")),c.push({id:o.id,src:k,caption:"",alt:t}),d[k]=c[c.length-1]}else"img"===p&&(o.addEventListener("load",function(c){b&&console.log(f(c.target.currentSrc));var e=d[f(c.target.currentSrc)];a.innerHTML=e.caption,c.target.alt=e.alt,b&&(console.log(e),console.log(c.target))}),k=f(o.src),c.push({id:o.id,src:k,caption:"",alt:o.alt}),d[k]=c[c.length-1])}else"figcaption"===m&&(l.hasAttribute("data-for")?(l.setAttribute("aria-hidden",!0),l.style.display="none",j=g(l.getAttribute("data-for")),j.caption=l.innerHTML):(a=l,j=g(""),j.caption=l.innerHTML))}b&&(console.log(c),console.log(d))}();