!function(){"use strict";var a,b=!1,c=[],d={},e=document.getElementsByTagName("figure"),f=function(a){return a.replace(window.location.origin+window.location.pathname,"")},g=function(a){for(var b=0;b<c.length;b++)if(c[b].id===a)return c[b]};b&&console.log(e);for(var h=0;h<e.length;h++)for(var i=0;i<e[h].children.length;i++){var j=e[h].children[i],k=j.tagName.toLowerCase();if("picture"===k)for(var l=0;l<j.children.length;l++){var m=j.children[l],n=m.tagName.toLowerCase();if("source"===n)for(var o=m.srcset.split(","),p=0;p<o.length;p++){var q=o[p].trim().split(" "),r=f(q[0].trim()),s="";m.hasAttribute("data-alt")&&(s=m.getAttribute("data-alt")),c.push({id:m.id,src:r,caption:"",alt:s}),d[r]=c[c.length-1]}else if("img"===n){m.addEventListener("load",function(c){b&&console.log(f(c.target.currentSrc));var e=d[f(c.target.currentSrc)];a.innerHTML=e.caption,c.target.alt=e.alt,b&&(console.log(e),console.log(c.target))});var r=f(m.src);c.push({id:m.id,src:r,caption:"",alt:m.alt}),d[r]=c[c.length-1]}}else if("figcaption"===k)if(j.hasAttribute("data-for")){j.setAttribute("aria-hidden",!0),j.style.display="none";var t=g(j.getAttribute("data-for"));t.caption=j.innerHTML}else{a=j;var t=g("");t.caption=j.innerHTML}}b&&(console.log(c),console.log(d))}();